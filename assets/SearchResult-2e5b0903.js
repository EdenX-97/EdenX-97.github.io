import{u as D,a as I,M,b as Q,d as T,c as F,s as L,L as R,e as Z}from"./app-dfa482b7.js";import{r as f,h as A,c as $,B as _,D as ee,F as te,o as ae,C as le,j as e,R as J,w as se}from"./framework-5afa3ebb.js";const oe="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";const V=()=>e(L,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));V.displayName="CloseIcon";const P=()=>e(L,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));P.displayName="HeadingIcon";const Y=()=>e(L,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));Y.displayName="HeartIcon";const k=()=>e(L,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));k.displayName="HistoryIcon";const G=()=>e(L,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));G.displayName="TitleIcon";const ce={0:"Tag: $content",1:"Category: $content"},ne=300,b=5,re={"/":{cancel:"Cancel",placeholder:"Search",search:"Search",select:"to select",navigate:"to navigate",exit:"to exit",history:"Search History",emptyHistory:"Empty Search History",emptyResult:"No results found",loading:"Loading search indexes..."}},ue="search-pro-history-results",y=D(ue,[]),ie=()=>({history:y,addHistory:a=>{y.value.length<b?y.value=[a,...y.value]:y.value=[a,...y.value.slice(0,b-1)]},removeHistory:a=>{y.value=[...y.value.slice(0,a),...y.value.slice(a+1)]}}),he=f(oe),pe=A(()=>JSON.parse(R(he.value))),B=(a,h)=>{const p=a.toLowerCase(),l=h.toLowerCase(),c=[];let s=0,i=0;const v=(t,d=!1)=>{let o="";i===0?o=t.length>20?`… ${t.slice(-20)}`:t:d?o=t.length+i>100?`${t.slice(0,100-i)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&c.push(o),i+=o.length,d||(c.push(["strong",h]),i+=h.length,i>=100&&c.push(" …"))};let g=p.indexOf(l,s);if(g===-1)return null;for(;g>=0;){const t=g+l.length;if(v(a.slice(s,g)),s=t,i>100)break;g=p.indexOf(l,s)}return i<100&&v(a.slice(s),!0),c},E=a=>a.reduce((h,{type:p})=>h+(p==="title"?50:p==="heading"?20:p==="custom"?10:1),0),ve=(a,h)=>{var p;const l={};for(const[c,s]of Object.entries(h)){const i=((p=h[c.replace(/\/[^\\]*$/,"")])==null?void 0:p.title)||"",v=`${i?`${i} > `:""}${s.title}`,g=B(s.title,a);g&&(l[v]=[...l[v]||[],{type:"title",path:c,display:g}]),s.customFields&&Object.entries(s.customFields).forEach(([t,d])=>{d.forEach(o=>{const n=B(o,a);n&&(l[v]=[...l[v]||[],{type:"custom",path:c,index:t,display:n}])})});for(const t of s.contents){const d=B(t.header,a);d&&(l[v]=[...l[v]||[],{type:"heading",path:c+(t.slug?`#${t.slug}`:""),display:d}]);for(const o of t.contents){const n=B(o,a);n&&(l[v]=[...l[v]||[],{type:"content",header:t.header,path:c+(t.slug?`#${t.slug}`:""),display:n}])}}}return Object.keys(l).sort((c,s)=>E(l[c])-E(l[s])).map(c=>({title:c,contents:l[c]}))},de=a=>{const h=I(),p=f([]),l=A(()=>pe.value[h.value]),c=Z(s=>{p.value=s?ve(s,l.value):[]},ne);return se([a,h],()=>{c(a.value)}),p};var ye=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:h}){const p=_(),l=ee(),c=I(),s=M(re),{history:i,addHistory:v,removeHistory:g}=ie(),t=te(a,"query"),d=de(t),o=f(0),n=f(0),w=f(),x=A(()=>d.value.length>0),H=A(()=>d.value[o.value]||null),U=()=>{o.value=o.value>0?o.value-1:d.value.length-1,n.value=H.value.contents.length-1},j=()=>{o.value=o.value<d.value.length-1?o.value+1:0,n.value=0},z=()=>{n.value<H.value.contents.length-1?n.value=n.value+1:j()},W=()=>{n.value>0?n.value=n.value-1:U()},N=r=>r.map(u=>typeof u=="string"?u:e(u[0],u[1])),O=r=>{if(r.type==="custom"){const u=ce[r.index]||"$content",[C,S=""]=typeof u=="object"?u[c.value].split("$content"):u.split("$content");return N([C,...r.display,S])}return N(r.display)},q=()=>{o.value=0,n.value=0,h("updateQuery",""),h("close")};return ae(()=>{Q("keydown",r=>{if(x.value){if(r.key==="ArrowUp")W();else if(r.key==="ArrowDown")z();else if(r.key==="Enter"){const u=H.value.contents[n.value];l.path!==u.path&&(v(u),p.push(u.path),q())}}}),T(w.value,{reserveScrollBarGap:!0})}),le(()=>{F()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?i.value.length===0:!x.value}],ref:w},t.value===""?i.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},s.value.history),i.value.map((r,u)=>e(J,{to:r.path,class:["search-pro-result-item",{active:n.value===u}],onClick:()=>{console.log("click"),q()}},()=>[e(k,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",O(r))]),e("button",{class:"search-pro-close-icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),g(u)}},e(V))]))])):s.value.emptyHistory:x.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:r,contents:u},C)=>{const S=o.value===C;return e("li",{class:["search-pro-result-list-item",{active:S}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),u.map((m,X)=>{const K=S&&n.value===X;return e(J,{to:m.path,class:["search-pro-result-item",{active:K,"aria-selected":K}],onClick:()=>{v(m),q()}},()=>[m.type==="content"?null:e(m.type==="title"?G:m.type==="heading"?P:Y,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[m.type==="content"&&m.header?e("div",{class:"content-header"},m.header):null,e("div",O(m))])])})])})):s.value.emptyResult)}});export{ye as default};
